{"mappings":"mkBAAA,IAsCIA,EAtCJC,EAAAC,EAAA,S,oDAKMC,EAAcC,SAASC,cAAc,yBACrCC,EAAQF,SAASC,cAAc,gBAC/BE,EAAWH,SAASC,cAAc,iBAClCG,EAAaJ,SAASC,cAAc,oBACpCI,EAAWL,SAASC,cAAc,kBAC3BD,SAASC,cAAc,QAWpC,SAASK,IACPJ,EAAMK,UAAUC,OAAO,aACvBR,SAASS,iBAAiB,QAASC,GACnCC,QAAQC,IAAI,Y,CAEd,SAASF,EAAWG,GAEfX,EAAMK,UAAUO,SAAS,cACzBf,EAAYe,SAASD,EAAME,SAC3Bb,EAAMY,SAASD,EAAME,UAEtBT,IACAN,SAASgB,oBAAoB,QAASN,G,CArB1CX,EAAYU,iBAAiB,QAASH,GACtCH,EAASM,iBAAiB,QAASH,GACnCN,SAASS,iBAAiB,QAASC,GACnCV,SAASS,iBAAiB,WAAW,SAACQ,GACrB,WAAXA,EAAGC,KAAqBhB,EAAMK,UAAUO,SAAS,cACnDR,G,IAuBJ,I,EAAMa,EAAYnB,SAASC,cAAc,uBACnCmB,EAAOpB,SAASC,cAAc,eAC9BoB,EAAQrB,SAASC,cAAc,gBAC/BqB,EAAatB,SAASC,cAAc,2BACpCsB,EAAgBvB,SAASC,cAAc,+BACvCuB,EAASxB,SAASC,cAAc,sBAChCwB,EAAQzB,SAASC,cAAc,sBAC/ByB,EAAY1B,SAASC,cAAc,uBAKnC0B,GAJO3B,SAASC,cAAc,+BAIP,SAAC2B,GAC5B,IAAMC,EAAQ,GAId,OAHAD,EAAYE,SAAQ,SAACC,GACnBF,EAAMG,KAAKD,EAAQE,K,IAEdJ,EAAMK,KAAK,K,YA2BEC,EAAeC,G,OAAfC,EAAcC,MAAAC,KAAAC,U,UAAdH,I,OAAAA,EAAfI,EAAA5C,EAAA,CAAA4C,EAAAC,GAAAC,MAAA,SAAAC,EAA8BR,G,IAE3BS,E,2FAAiBC,EAAAC,QAAMC,IAC3B,sCAAwDC,OAAlBb,EAAO,aAAkBa,OAAPC,EAAAC,S,cADpDN,EAAQO,EAAAC,K,kBAGPR,EAASS,M,uCAEhBC,EAAAC,OAAOC,QAAQ,sDACR9C,QAAC+C,MAAM,4CAA2CN,EAAAO,I,kBAClD,M,0DATyBrB,MAAAC,KAAAC,U,CAxBpCzC,EAAYU,iBAAiB,S,EAASgC,EAAA5C,EAAA,CAAA4C,EAAAC,GAAAC,MAAA,SAAAC,EAAO3B,G,IACrC2C,EACAC,EAGAC,E,yEAJAF,EAAS3C,EAAGF,OAAOgD,QAAQ,gBAC3BF,EAAWD,EAAO3D,cAAc,cACxBgB,EAAGF,OAAOiD,IACxBpE,EAASiE,EAASI,G,SACO9B,EAAevC,G,QAAlCkE,EAAUV,EAAAC,QAGd3B,EAAUsC,IAAM,sCAA6Df,OAAvBa,EAAWI,aACjE/C,EAAUgD,UAAYL,EAAWM,MACjCjD,EAAUkD,QAAQD,MAAQN,EAAWM,MACrChE,EAAWiE,QAAQJ,GAAKrE,EACxBS,EAASgE,QAAQJ,GAAKrE,EACtBwB,EAAK+C,UAAYL,EAAWQ,aAC5BjD,EAAM8C,UAAYL,EAAWS,WAC7BjD,EAAW6C,UAAYL,EAAWU,WAClCjD,EAAc4C,UAAYL,EAAWW,eACrChD,EAAM0C,UAAYL,EAAWY,SAC7BlD,EAAO2C,UAAYxC,EAAqBmC,EAAWa,S,oDAlBV1D,G","sources":["src/scripts/modal.mjs"],"sourcesContent":["import axios from 'axios';\nimport { apiKey } from './make_single_tile.mjs';\nimport { Notify } from 'notiflix';\n// ----------otwieranie/zamykanie Modala-----------\n\nconst galleryList = document.querySelector('ul.gallery__container');\nconst modal = document.querySelector('[data-modal]');\nconst closeBtn = document.querySelector('[modal-close]');\nconst addWatched = document.querySelector('.add-watched-btn');\nconst addQueue = document.querySelector('.add-queue-btn');\nconst body = document.querySelector('body');\n\ngalleryList.addEventListener('click', toggleModal);\ncloseBtn.addEventListener('click', toggleModal);\ndocument.addEventListener('click', closeModal);\ndocument.addEventListener('keydown', (ev) => {\n  if (ev.key === 'Escape' && !modal.classList.contains('is-hidden')) {\n    toggleModal();\n  }\n});\n\nfunction toggleModal() {\n  modal.classList.toggle('is-hidden');\n  document.addEventListener('click', closeModal);\n  console.log('openModal');\n}\nfunction closeModal(event) {\n  if (\n    !modal.classList.contains('is-hidden') &&\n    !galleryList.contains(event.target) &&\n    !modal.contains(event.target)\n  ) {\n    toggleModal();\n    document.removeEventListener('click', closeModal);\n  }\n}\n// ------------pobieranie API------------\n\nlet filmId;\n\nconst filmTitle = document.querySelector('h2.modal-film-title');\nconst vote = document.querySelector('b.vote-data');\nconst votes = document.querySelector('b.votes-data');\nconst popularity = document.querySelector('b.modal-popularity-data');\nconst originalTitle = document.querySelector('b.modal-original-title-data');\nconst genres = document.querySelector('b.modal-genre-data');\nconst about = document.querySelector('b.about-title-data');\nconst filmImage = document.querySelector('div.modal-image img');\nconst list = document.querySelector('ul.modal-film-features-list');\n\n//funkcja generowania stringa z IDs\n\nconst generateGenresString = (genresArray) => {\n  const array = [];\n  genresArray.forEach((element) => {\n    array.push(element.name);\n  });\n  return array.join(', ');\n};\n\ngalleryList.addEventListener('click', async (ev) => {\n  const parent = ev.target.closest('.movie-block');\n  const children = parent.querySelector('.film-info');\n  const image = ev.target.src;\n  filmId = children.id;\n  const getDetails = await getFilmDetails(filmId);\n  // Uzyskiwanie danych filmu bezpośrednio z getFilmDetails\n  if (getDetails) {\n    filmImage.src = `https://image.tmdb.org/t/p/original${getDetails.poster_path}`;\n    filmTitle.innerText = getDetails.title;\n    filmTitle.dataset.title = getDetails.title;\n    addWatched.dataset.id = filmId;\n    addQueue.dataset.id = filmId;\n    vote.innerText = getDetails.vote_average;\n    votes.innerText = getDetails.vote_count;\n    popularity.innerText = getDetails.popularity;\n    originalTitle.innerText = getDetails.original_title;\n    about.innerText = getDetails.overview;\n    genres.innerText = generateGenresString(getDetails.genres);\n  }\n});\n\n// --------funkcja pobierania danych filmu-------\n\nexport async function getFilmDetails(filmId) {\n  try {\n    const response = await axios.get(\n      `https://api.themoviedb.org/3/movie/${filmId}?api_key=${apiKey}`\n    );\n    return response.data;\n  } catch (error) {\n    Notify.failure('Wystąpił błąd podczas pobierania szczegółów filmu.');\n    console.error('Błąd podczas pobierania szczegółów filmu:', error);\n    return null;\n  }\n}\n"],"names":["$94afd251efeaf9be$var$filmId","$bpxeT","parcelRequire","$94afd251efeaf9be$var$galleryList","document","querySelector","$94afd251efeaf9be$var$modal","$94afd251efeaf9be$var$closeBtn","$94afd251efeaf9be$var$addWatched","$94afd251efeaf9be$var$addQueue","$94afd251efeaf9be$var$toggleModal","classList","toggle","addEventListener","$94afd251efeaf9be$var$closeModal","console","log","event","contains","target","removeEventListener","ev","key","$94afd251efeaf9be$var$filmTitle","$94afd251efeaf9be$var$vote","$94afd251efeaf9be$var$votes","$94afd251efeaf9be$var$popularity","$94afd251efeaf9be$var$originalTitle","$94afd251efeaf9be$var$genres","$94afd251efeaf9be$var$about","$94afd251efeaf9be$var$filmImage","$94afd251efeaf9be$var$generateGenresString","genresArray","array","forEach","element","push","name","join","$94afd251efeaf9be$export$cb9b4ba94b6f0493","filmId1","$94afd251efeaf9be$var$_getFilmDetails","apply","this","arguments","$parcel$interopDefault","$2TvXO","mark","_callee","response","$dIxxU","default","get","concat","$xTqOg","apiKey","_ctx","sent","data","$ejkSG","Notify","failure","error","t0","parent","children","getDetails","closest","src","id","poster_path","innerText","title","dataset","vote_average","vote_count","popularity","original_title","overview","genres"],"version":3,"file":"index.086a545d.js.map"}