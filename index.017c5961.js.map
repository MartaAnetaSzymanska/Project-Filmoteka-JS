{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,S,0BAKA,MAAMC,EAAcC,SAASC,cAAc,yBACrCC,EAAQF,SAASC,cAAc,gBAE/BE,GADWH,SAASC,cAAc,iBACrBD,SAASC,cAAc,qBACpCG,EAAWJ,SAASC,cAAc,kBAKxC,SAASI,IACPH,EAAMI,UAAUC,OAAO,Y,CAKzB,IAAIC,EATJT,EAAYU,iBAAiB,QAASJ,GACtCH,EAAMO,iBAAiB,QAASJ,GAUhC,MAAMK,EAAYV,SAASC,cAAc,uBACnCU,EAAOX,SAASC,cAAc,eAC9BW,EAAQZ,SAASC,cAAc,gBAC/BY,EAAab,SAASC,cAAc,2BACpCa,EAAgBd,SAASC,cAAc,+BACvCc,EAASf,SAASC,cAAc,sBAChCe,EAAQhB,SAASC,cAAc,sBAC/BgB,EAAYjB,SAASC,cAAc,uBAC5BD,SAASC,cAAc,+BAYpCF,EAAYU,iBAAiB,SAASS,MAAOC,IAC3C,MACMC,EADSD,EAAGE,OAAOC,QAAQ,gBACTrB,cAAc,cACxBkB,EAAGE,OAAOE,IACxBf,EAASY,EAASI,GAClB,MAAMC,QAmBRP,eAA8BQ,GAC5B,IAIE,aAHuB7B,EAAA8B,QAAMC,IAC3B,sCAAsCF,aAAkBG,EAAAC,WAE1CC,I,CAChB,MAAOC,GAGP,OAFAC,EAAAC,OAAOC,QAAQ,sDACRC,QAACJ,MAAM,4CAA6CA,GACpD,I,EA5BgBK,CAAe7B,GAEpCiB,IACFR,EAAUM,IAAM,sCAAsCE,EAAWa,cACjE5B,EAAU6B,UAAYd,EAAWe,MACjC9B,EAAU+B,QAAQD,MAAQf,EAAWe,MACrCrC,EAAWsC,QAAQjB,GAAKhB,EACxBJ,EAASqC,QAAQjB,GAAKhB,EACtBG,EAAK4B,UAAYd,EAAWiB,aAC5B9B,EAAM2B,UAAYd,EAAWkB,WAC7B9B,EAAW0B,UAAYd,EAAWmB,WAClC9B,EAAcyB,UAAYd,EAAWoB,eACrC7B,EAAMuB,UAAYd,EAAWqB,SAC7B/B,EAAOwB,UA1BkB,CAACQ,IAC5B,MAAMC,EAAQ,GAId,OAHAD,EAAYE,SAASC,IACnBF,EAAMG,KAAKD,EAAQE,KAAK,IAEnBJ,EAAMK,KAAK,KAAK,EAqBFC,CAAqB7B,EAAW8B,Q","sources":["src/scripts/modal.mjs"],"sourcesContent":["import axios from 'axios';\nimport { apiKey } from './make_single_tile.mjs';\nimport { Notify } from 'notiflix';\n// ----------otwieranie/zamykanie Modala-----------\n\nconst galleryList = document.querySelector('ul.gallery__container');\nconst modal = document.querySelector('[data-modal]');\nconst closeBtn = document.querySelector('[modal-close]');\nconst addWatched = document.querySelector(\".add-watched-btn\");\nconst addQueue = document.querySelector(\".add-queue-btn\");\n\ngalleryList.addEventListener('click', toggleModal);\nmodal.addEventListener('click', toggleModal);\n\nfunction toggleModal() {\n  modal.classList.toggle('is-hidden');\n}\n\n// ------------pobieranie API------------\n\nlet filmId;\n\nconst filmTitle = document.querySelector('h2.modal-film-title');\nconst vote = document.querySelector('b.vote-data');\nconst votes = document.querySelector('b.votes-data');\nconst popularity = document.querySelector('b.modal-popularity-data');\nconst originalTitle = document.querySelector('b.modal-original-title-data');\nconst genres = document.querySelector('b.modal-genre-data');\nconst about = document.querySelector('b.about-title-data');\nconst filmImage = document.querySelector('div.modal-image img');\nconst list = document.querySelector('ul.modal-film-features-list');\n\n//funkcja generowania stringa z IDs\n\nconst generateGenresString = (genresArray) => {\n  const array = [];\n  genresArray.forEach((element) => {\n    array.push(element.name);\n  });\n  return array.join(', ');\n};\n\ngalleryList.addEventListener('click', async (ev) => {\n  const parent = ev.target.closest('.movie-block');\n  const children = parent.querySelector('.film-info');\n  const image = ev.target.src;\n  filmId = children.id;\n  const getDetails = await getFilmDetails(filmId);\n  // Uzyskiwanie danych filmu bezpośrednio z getFilmDetails\n  if (getDetails) {\n    filmImage.src = `https://image.tmdb.org/t/p/original${getDetails.poster_path}`;\n    filmTitle.innerText = getDetails.title;\n    filmTitle.dataset.title = getDetails.title;\n    addWatched.dataset.id = filmId;\n    addQueue.dataset.id = filmId;\n    vote.innerText = getDetails.vote_average;\n    votes.innerText = getDetails.vote_count;\n    popularity.innerText = getDetails.popularity;\n    originalTitle.innerText = getDetails.original_title;\n    about.innerText = getDetails.overview;\n    genres.innerText = generateGenresString(getDetails.genres);\n  }\n});\n\n// --------funkcja pobierania danych filmu-------\n\nasync function getFilmDetails(filmId) {\n  try {\n    const response = await axios.get(\n      `https://api.themoviedb.org/3/movie/${filmId}?api_key=${apiKey}`\n    );\n    return response.data;\n  } catch (error) {\n    Notify.failure('Wystąpił błąd podczas pobierania szczegółów filmu.');\n    console.error('Błąd podczas pobierania szczegółów filmu:', error);\n    return null;\n  }\n}\n"],"names":["$2shzp","parcelRequire","$e870fae935a73e3e$var$galleryList","document","querySelector","$e870fae935a73e3e$var$modal","$e870fae935a73e3e$var$addWatched","$e870fae935a73e3e$var$addQueue","$e870fae935a73e3e$var$toggleModal","classList","toggle","$e870fae935a73e3e$var$filmId","addEventListener","$e870fae935a73e3e$var$filmTitle","$e870fae935a73e3e$var$vote","$e870fae935a73e3e$var$votes","$e870fae935a73e3e$var$popularity","$e870fae935a73e3e$var$originalTitle","$e870fae935a73e3e$var$genres","$e870fae935a73e3e$var$about","$e870fae935a73e3e$var$filmImage","async","ev","children","target","closest","src","id","getDetails","filmId1","default","get","$4v6BD","apiKey","data","error","$1GAPJ","Notify","failure","console","$e870fae935a73e3e$var$getFilmDetails","poster_path","innerText","title","dataset","vote_average","vote_count","popularity","original_title","overview","genresArray","array","forEach","element","push","name","join","$e870fae935a73e3e$var$generateGenresString","genres"],"version":3,"file":"index.017c5961.js.map"}